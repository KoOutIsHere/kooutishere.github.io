<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Address Breakdown Form</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
        }
        input {
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>

    <h2>Search Hotel or Building Name</h2>
    <p>Enter a hotel, building name, or address keyword to auto-fill the details below:</p>

    <!-- Form -->
    <div class="form-group">
        <label for="place_search">Search</label>
        <input id="place_search" type="text" placeholder="Type to search...">
    </div>

    <div class="form-group">
        <label for="street">Street</label>
        <input id="street" type="text" readonly>
    </div>

    <div class="form-group">
        <label for="district">District</label>
        <input id="district" type="text" readonly>
    </div>

    <div class="form-group">
        <label for="city">City</label>
        <input id="city" type="text" readonly>
    </div>

    <div class="form-group">
        <label for="postal_code">Postal Code</label>
        <input id="postal_code" type="text" readonly>
    </div>

    <div class="form-group">
        <label for="country">Country</label>
        <input id="country" type="text" readonly>
    </div>

    <!-- Include the Google Maps JavaScript API -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBQjEkcF3SE9TDHwENM_2bGaDTpVouUvBY&libraries=places"></script>
    <script>
        function initAutocomplete() {
            // Input field for search
            const input = document.getElementById('place_search');

            // Initialize Google Places Autocomplete
            const autocomplete = new google.maps.places.Autocomplete(input);

            // Set fields to retrieve more detailed address components
            autocomplete.setFields(['address_components', 'formatted_address', 'geometry']);

            // When a place is selected
            autocomplete.addListener('place_changed', function () {
                const place = autocomplete.getPlace();

                if (!place.geometry) {
                    alert("No details available for the selected place.");
                    return;
                }

                // Extract address components
                const addressComponents = place.address_components;
                const componentForm = {
                    street_number: 'short_name',
                    route: 'long_name',
                    locality: 'long_name',
                    administrative_area_level_2: 'long_name', // District
                    administrative_area_level_1: 'short_name', // State
                    country: 'long_name',
                    postal_code: 'short_name'
                };

                // Reset all fields
                document.getElementById('street').value = '';
                document.getElementById('district').value = '';
                document.getElementById('city').value = '';
                document.getElementById('postal_code').value = '';
                document.getElementById('country').value = '';

                // Populate the fields
                addressComponents.forEach((component) => {
                    const addressType = component.types[0];
                    if (componentForm[addressType]) {
                        const val = component[componentForm[addressType]];
                        switch (addressType) {
                            case 'street_number':
                            case 'route':
                                document.getElementById('street').value += (document.getElementById('street').value ? ' ' : '') + val;
                                break;
                            case 'administrative_area_level_2':
                                document.getElementById('district').value = val;
                                break;
                            case 'locality':
                                document.getElementById('city').value = val;
                                break;
                            case 'postal_code':
                                document.getElementById('postal_code').value = val;
                                break;
                            case 'country':
                                document.getElementById('country').value = val;
                                break;
                        }
                    }
                });
            });
        }

        // Initialize autocomplete on page load
        google.maps.event.addDomListener(window, 'load', initAutocomplete);
    </script>

</body>
</html>
